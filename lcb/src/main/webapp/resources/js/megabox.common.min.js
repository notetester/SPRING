/*! megabox 23-07-2020 */

var gfn_getCodes=function(t,e,n){var a,o,i={grpCd:t,DATA_PREFIX:"CMMCD_"},r=t.split(","),s=e.split(","),l=n.split(",");$.ajax({type:"POST",contentType:"application/json;charset=UTF-8",url:"/co/coc/CommCdMapp/selectCommCdMappList.do",dataType:"json",data:JSON.stringify({dlParam:i}),success:function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)-1<e[n].indexOf("CMMCD_")&&(a=r.indexOf(e[n].substr(6)),o=s[a],$("#"+o).is("select")?($("#"+o).find("option").remove(),"A"==l[a]?$("#"+o).append("<option value=''>전체</option>"):"S"==l[a]&&$("#"+o).append("<option value=''>선택</option>"),$.each(t[e[n]],function(t){$("#"+o).append("<option value='"+this.cdId+"'>"+this.cdNm+"</option>")})):$("#"+o).is(":radio")&&($.each(t[e[n]],function(t){$("#"+o).before("<input type='radio' name='"+o+"' id='"+(o+t)+"' value='"+this.cdId+"' />"+this.cdNm+"&nbsp; ")}),$("#"+o).remove()))},error:function(t,e,n){gfn_alertMsgBox("공통 코드 조회 시 오류가 발생하였습니다.")}})},gfn_getAppDataToCodes=function(a){for(var o,i,r,s,l=0;l<a.length;l++)$.ajax({type:"POST",contentType:"application/json;charset=UTF-8",url:a[l].action,dataType:"json",data:JSON.stringify(a[l].paramData),success:function(t){var e=t.dlResultList;$("#"+a[l].uiComp).append("<option value=''>"+a[l].allText+"</option>");for(var n=0;n<e.length;n++)o=e[n][a[l].cdId],i=e[n][a[l].cdName],r=e[n][a[l].etcId],s=a[l].etcAttr,$("#"+a[l].uiComp).append("<option value='"+o+"' "+s+"='"+r+"'>"+i+"</option>")},error:function(t,e,n){gfn_alertMsgBox("데이터 코드 조회 시 오류가 발생하였습니다.")}})},gfn_enterKeyByVal=function(t,e,n){13==(t.keyCode?t.keyCode:t.which)&&e(n)};function replaceAll(t,e,n){return t.split(e).join(n)}function base64url(t){return encodedSource=CryptoJS.enc.Base64.stringify(t),encodedSource=encodedSource.replace(/=+$/,""),encodedSource=encodedSource.replace(/\+/g,"-"),encodedSource=encodedSource.replace(/\//g,"_"),encodedSource}var gfn_getIndex=function(t){return t.parent().children().index(t.get(0))},gfn_dateChange=function(t,e,n){if(null!=t&&9==e.length){var a=e.substring(0,3),o=e.substring(3,6),i=e.substring(6,9),r=null;"string"==typeof t?(t=t.removeAll(Constants.SEPARATOR_DATE),(r=new Date).setFullYear(t.substring(0,4)),r.setMonth(parseInt(t.substring(4,6))-1),r.setDate(t.substring(6,8))):r=new Date(t.getFullYear(),t.getMonth(),t.getDate());var s=new Date(parseInt(a),parseInt(o),parseInt(i)),l=new Date(0,0,0),c=new Date(s-l),m=new Date(r-c),p=m.getFullYear().toString(),u=(m.getMonth()+1).toString(),d=m.getDate().toString();return u.length<2&&(u="0"+u),d.length<2&&(d="0"+d),p+Constants.SEPARATOR_DATE+u+Constants.SEPARATOR_DATE+d}},gfn_dateComp=function(t,e,n){if(null!=t&&null!=e){var a=null,o=null;"string"==typeof t?(t=t.removeAll(Constants.SEPARATOR_DATE),(a=new Date).setFullYear(t.substring(0,4)),a.setMonth(parseInt(t.substring(4,6))-1),a.setDate(t.substring(6,8))):a=new Date(t),"string"==typeof e?(e=e.removeAll(Constants.SEPARATOR_DATE),(o=new Date).setFullYear(e.substring(0,4)),o.setMonth(parseInt(e.substring(4,6))-1),o.setDate(e.substring(6,8))):o=new Date(e);var i=o-a;null==n&&(n="D");var r=0;return"D"==n?r=i/864e5:"M"==n?r=i/2592e6:"Y"==n?r=i/31536e6:"HH"==n?r=i/36e5:"MI"==n?r=i/6e4:"SS"==n&&(r=i/1e3),r}},pageSet,gfn_setPage=function(s){if("string"==typeof s?(pageSet.currentPage+=Number(10*s),pageSet.currentPage=Math.max(pageSet.currentPage,1),pageSet.currentPage=Math.min(pageSet.currentPage,pageSet.pageCount)):"number"==typeof s?pageSet.currentPage=s:pageSet=$.extend({url:"",type:"POST",contentType:"application/json;charset=UTF-8",currentPage:1,recordCountPerPage:10,totCount:0,pageCount:0,successCallBack:null,errorCallBack:null,paramData:{},navId:"nav.pagination",sessionAt:!1},s),""==pageSet.url)return gfn_alertMsgBox("호출되는 URL정보가 없습니다."),!1;if(null!=s.historyState){var t=s.historyState;t.currPage=pageSet.currentPage;var e="?";for(var n in t)e=e+n+"="+t[n]+"&";window.history.pushState(t,null,e)}var a=pageSet.paramData;a.currentPage=""+pageSet.currentPage,a.recordCountPerPage=""+pageSet.recordCountPerPage,$.ajaxMegaBox({url:pageSet.url,type:pageSet.type,contentType:pageSet.contentType,sessionAt:pageSet.sessionAt,data:JSON.stringify(a),success:function(t,e,n){pageSet.totCount=Number(t.totCount),pageSet.pageCount=Math.ceil(pageSet.totCount/pageSet.recordCountPerPage),t.pageCount=pageSet.pageCount;var a=10*Math.floor((pageSet.currentPage-1)/10)+1,o=10*Math.floor((pageSet.currentPage-1)/10)+10,o=Math.min(pageSet.pageCount,o),i=$(pageSet.navId);if(i){i.children().remove(),1!=a&&(i.append('<a title="처음 페이지 보기"   href="javascript:void(0)" class="control first" pageNum=1>first</a> '),i.append('<a title="이전 10페이지 보기" href="javascript:void(0)" class="control prev"  pageNum='+(a-10)+">prev</a> "));for(var r=a;r<=o;r++)r!=pageSet.currentPage?i.append('<a title="'+r+'페이지보기" href="javascript:void(0)" pageNum='+r+">"+r+"</a> "):i.append('<strong class="active">'+r+"</strong> ");o!=pageSet.pageCount&&(i.append('<a title="이후 10페이지 보기"  href="javascript:void(0)" class="control next" pageNum='+(o+1)+">next</a> "),i.append('<a title="마지막 페이지 보기"  href="javascript:void(0)" class="control last" pageNum='+pageSet.pageCount+">last</a> ")),$(pageSet.navId+" > a").unbind("click").bind("click",function(){_this=$(this),s.currentPage=Number(_this.attr("pageNum")),gfn_setPage(s)})}pageSet.successCallBack?pageSet.successCallBack(t,e,n):gfn_alertMsgBox("성공하였습니다.")},error:function(t,e,n){var a;pageSet.errorCallBack?pageSet.errorCallBack(t,e,n):(a=JSON.parse(t.responseText),gfn_alertMsgBox(t.status),gfn_alertMsgBox(a.message))}})},gfn_imageUpload=function(t){var l=$.extend({url:"/on/coc/FileUpload/insertFileUpload.do",type:"POST",maxSize:15,success:null,error:null,fileSizeError:null,fileNo:null,fileExt:null,baseType:null,uploadType:null},t);$("form[name='fileUploadForm']").remove();var e=$("<form name='fileUploadForm' method='POST' enctype='multipart/form-data'/>");e.append("<input name='file' type='file' />"),e.append("<input type='hidden' name='fileNo' value='"+l.fileNo+"' />"),e.append("<input type='hidden' name='baseType' value='"+l.baseType+"' />"),e.append("<input type='hidden' name='uploadType' value='"+l.uploadType+"' />"),e.append("<input type='hidden' name='resizeFileSize' value='"+l.resizeFileSize+"' />"),e.hide(),$("body").append(e),$("form[name='fileUploadForm'] > input[name='file']").unbind("change").bind("change",function(){var o=$("form[name='fileUploadForm']")[0],t=this.files[0].size;if(1024*Number(l.maxSize)*1024<t)return l.fileSizeError?l.fileSizeError((t/1048576).toFixed(2),Number(l.maxSize)):gfn_alertMsgBox("현재 파일 크기 : "+(t/1048576).toFixed(2)+" MB 입니다.\n\n최대 파일 크기 : "+Number(l.maxSize)+" MB 입니다."),$(o).remove(),!1;if(null!=l.fileExt&&""!=l.fileExt){var e=l.fileExt.split(","),n=this.files[0].name,a=n.slice(n.lastIndexOf(".")+1).toLowerCase(),i=!1;if(0<e.length)for(var r=0;r<e.length;r++)a==e[r].toLowerCase().trim()&&(i=!0);if(0==i)return l.fileExtError(),$(o).remove(),!1}var s=new FormData(o);$.ajaxMegaBox({url:l.url,data:s,type:l.type,contentType:!1,processData:!1,success:function(t,e,n){-1==t.statCd?gfn_alertMsgBox(t.msg):(l.success?l.success(t,e,n):gfn_alertMsgBox("성공하였습니다."),$(o).remove())},error:function(t,e,n){var a;l.error?l.error(t,e,n):(a=JSON.parse(t.responseText),gfn_alertMsgBox(t.status),gfn_alertMsgBox(a.message)),$(o).remove()}})}),$("form[name='fileUploadForm'] > input[name='file']").click()},gfn_alertMsgBoxSize=function(t,e,n,a){gfn_alertMsgBox({msg:t,minHeight:n,minWidth:e,callback:a})},gfn_confirmMsgBoxSize=function(t,e,n,a,o){gfn_confirmMsgBox({msg:t,minHeight:n,minWidth:e,confirmFn:a,cancelFn:o})},gfn_alertMsgBoxM=function(t){alert(t)},gfn_alertMsgBox=function(){var t,e={};"string"==typeof arguments[0]?(e.msg=arguments[0],"number"==typeof arguments[1]?e.minHeight=arguments[1]:"function"==typeof arguments[1]&&(e.callback=arguments[1]),"number"==typeof arguments[2]?e.minHeight=arguments[2]:"function"==typeof arguments[2]&&(e.callback=arguments[2])):"object"==typeof arguments[0]&&(e=arguments[0]);try{sysCd}catch(t){sysCd=""}"MON"==sysCd?(t={message:e.msg},""!=nvl(e.callback)&&(t.okFunc=e.callback),AppHandler.Common.alert(t)):(t=$.extend({id:"layerId_"+(""+Math.random()).replace(/\D/g,""),msg:"",okBtnTxt:"확인",cancelBtnTxt:"취소",minHeight:200,minWidth:300,callback:void 0,param:void 0,type:"single",mobileAt:!1},e),mbAlert.toggle({id:t.id,msg:nvl(t.msg).replaceAll(/\n|\r\n/g,"<br>"),confirm:t.okBtnTxt,callback:{confirm:t.callback},param:t.param,minHeight:t.minHeight,minWidth:t.minWidth,type:t.type}))},gfn_confirmMsgBox=function(t,e,n,a,o){var i={};"string"==typeof t?(i.msg=t,i.confirmFn=e,i.cancelFn=n,"undefined"!=a&&""!=a&&(i.minHeight=a),"undefined"!=o&&""!=o&&(i.minWidth=o)):i=t;var r=$.extend({id:"layerId_"+(""+Math.random()).replace(/\D/g,""),msg:"",okBtnTxt:"확인",cancelBtnTxt:"취소",minHeight:200,minWidth:300,confirmFn:void 0,cancelFn:void 0,param:void 0,type:"",mobileAt:!1,sessionAt:!1},i);sessionAllow(r);sessionAllow(r)&&mbAlert.toggle({id:r.id,msg:nvl(r.msg).replaceAll(/\n|\r\n/g,"<br>"),confirm:r.okBtnTxt,cancel:r.cancelBtnTxt,callback:{confirm:r.confirmFn,cancel:r.cancelFn},param:r.param,minHeight:r.minHeight,minWidth:r.minWidth,type:r.type})},gfn_charToHtml=function(t){for(var e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x2F;":"/","&#x60;":"`","&#x3D;":"=","&#40;":"(","&#41;":")","&#35;":"#"},n=Object.keys(e),a=0;n.length>a;a++){var o=e[i=n[a]];t=t.split(i).join(o)}for(n=Object.keys({"&amp;":"&"}),a=0;n.length>a;a++){var i,o=e[i=n[a]];t=t.split(i).join(o)}return t},gfn_htmlToChar=function(t){for(var e={"&;":"&amp","#":"&#35;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;","(":"&#40;",")":"&#41;"},n=Object.keys(e),a=0;n.length>a;a++){var o=e[i=n[a]];t=t.split(i).join(o)}for(n=Object.keys({"&amp;":"&"}),a=0;n.length>a;a++){var i,o=e[i=n[a]];t=t.split(i).join(o)}return t},gfn_chkPrhword=function(t,a){$.ajaxMegaBox({url:"/on/oc/ocz/commOn/selectPrhwordList.do",data:JSON.stringify({checkWord:t.replaceAll("/\r\n/g","")}),success:function(t,e,n){a(t.prhwordList.map(function(t,e){return t.prhwordCn}))},error:function(t,e,n){var a=JSON.parse(t.responseText);gfn_alertMsgBox(t.status),gfn_alertMsgBox(a.message)}})},gfn_favorBrchReg=function(t,e){var n=null!=e?e:{};null!=t&&(n.callbackFn=t);var a={url:"/on/oc/ocz/commOn/favorBrchReg.do",height:"360",width:"500",initFn:"favorBrchRegInit",initParam:n,sessionAt:"N"!=n.saveYn};gfn_divLayPopUp(a)},gfn_storeBrchListPV=function(t,e){var n={cmbndKindNo:t};e||(n.titNm=e),gfn_divLayPopUp({url:"/on/oh/ohd/StoreDtl/selectStoreBrchList.do",height:"530",width:"600",target_id:"layer_chk_theater",btn_id:"btn_chkTheater",params:n})},gfn_divLayPopUp=function(options){var setting=$.extend({btn_id:"favorBrchReg",height:370,width:500,initFn:function(){},initParam:null,callObj:null,url:"",params:{},target_id:"favor_theater_setting",sessionAt:!1},options);0<$("#"+setting.target_id).length&&$("#"+setting.target_id).remove(),0<$("a[href='#"+setting.target_id+"']#"+setting.btn_id).length&&$("a[href='#"+setting.target_id+"']#"+setting.btn_id).remove();var _section=$("<section/>").attr({id:setting.target_id,class:"modal-layer"}),_a=$("<a/>").attr({href:"#"+setting.target_id,class:"right btn-modal-open",id:setting.btn_id,"w-data":setting.width,"h-data":setting.height});$(document.body).append(_a).append(_section);var paramData=setting.params;$.ajaxMegaBox({url:setting.url,data:setting.params,type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"html",sessionAt:setting.sessionAt,success:function(data,textStatus,jqXHR){$("#"+setting.target_id).html(data),$("a[href='#"+setting.target_id+"']#"+setting.btn_id).click(),null!=setting.initFn&&eval(setting.initFn)(setting.initParam),null!=setting.callObj&&$("#"+setting.target_id).find(".btn-modal-close, .close-layer").click(function(){setting.callObj.focus()})},error:function(t,e,n){gfn_alertMsgBox(t.status)}})},dateFormat,dateDiffFormat=function(t,e){return dateFormat=$.extend({stanDate:t.stanDate,diffSe:t.diffSe,diffVal:Number(t.diffVal),diffDate:null}),t.stanDate=t.stanDate.replaceAll(".","-"),dateFormat.diffDate=new Date(t.stanDate),"D"==t.diffSe&&dateFormat.diffDate.setDate(dateFormat.diffDate.getDate()+dateFormat.diffVal),"M"==t.diffSe&&dateFormat.diffDate.setMonth(dateFormat.diffDate.getMonth()+dateFormat.diffVal),"Y"==t.diffSe&&dateFormat.diffDate.setYear(dateFormat.diffDate.setFullYear()+dateFormat.diffVal),dateFormat.diffDate=$.datepicker.formatDate(e,dateFormat.diffDate),dateFormat.diffDate},dateStrFormat=function(t,e){if(null==t)return"&nbsp;";var n=t.substr(0,4),a=t.substr(4,2),o=t.substr(6,2),o=new Date(n,a,o);return $.datepicker.formatDate(e,o)},nvl=function(t,e){return null==t?null==e||null==e?"":e:t},metaFormat,settingMeta=function(t){metaFormat=$.extend({scnTitle:t.scnTitle,metaTagTitle:t.metaTagTitle,metaTagDtls:t.metaTagDtls,metaTagImg:t.metaTagImg,metaTagKeyword:t.metaTagKeyword,metaTagUrl:t.metaTagUrl}),document.title=$.parseHTML(t.scnTitle)[0].textContent,null!=t.metaTagTitle&&$("head #metaTagTitle").attr("content",t.metaTagTitle),null!=t.metaTagKeyword&&$("head #metaTagKeyword").attr("content",t.metaTagKeyword),null!=t.metaTagDtls&&$("head #metaTagDtls").attr("content",gfn_htmlToChar(t.metaTagDtls)),null!=t.metaTagTitle&&$("head #fbTitle").attr("content",t.metaTagTitle),null!=t.metaTagDtls&&$("head #fbDtls").attr("content",gfn_htmlToChar(t.metaTagDtls)),null!=t.metaTagImg&&$("head #fbImg").attr("content",t.metaTagImg),null!=t.metaTagUrl&&$("head #fbUrl").attr("content",t.metaTagUrl)},preMetaFormat;function saveCurrentMeta(){return preMetaFormat={scnTitle:document.title,metaTagTitle:$("head #metaTagTitle").prop("content"),metaTagDtls:$("head #metaTagDtls").prop("content"),metaTagUrl:$("head #fbUrl").prop("content")}}function noImg(t,e){if("del"==e)$(t).remove();else switch(e){case"main":t.src="/static/pc/images/common/bg/bg-noimage-main.png";break;case"human":t.src="/static/pc/images/mypage/bg-photo.png";break;case"movie":t.src="/static/pc/images/reserve/bg-poster-view.png";break;default:t.src="/static/pc/images/common/bg/bg-noimage-notmain.png"}}function fn_searchHeaderBoxOffice(){$("#headerBoxoForm").attr("action","/movie?searchText="+$("#headerMovieName").val()),$("#headerBoxoForm").submit()}function fn_chkHeaderBoxOffice(){if(""==$("#headerMovieName").val())return gfn_alertMsgBox("영화명을 입력해 주세요"),!1}function gfn_moveDetail(t){var e=MegaboxUtil.Form.createForm();e.attr("action","/movie-detail?rpstMovieNo="+t),e.submit()}function gfn_logdingModal(t){var e=null!=t?t:"body";switch($(e+" #bg-loading").length){case 0:$(e).append('<div id="bg-loading" class="bg-loading">\t<div class="spinner-border" role="status">\t\t<span class="sr-only">Loading...</span>\t</div></div>');break;default:$(e+" #bg-loading").remove()}}function gfn_isEmpty(t){return""==t.trim()}var gfn_moveEventDetail=function(t){var e=MegaboxUtil.Form.createForm();"Y"==$(t).data("netfunnel")?(e.attr("action","/event/detail?eventNo="+$(t).data("no")),NetfunnelChk.formSubmit("EVENT_DTL",e,function(){})):(e.append('<input type="hidden" name="eventNo" value="'+$(t).data("no")+'">'),e.attr("action","/event/detail"),e.attr("method","get"),e.submit())},gfn_selectBrchList=function(option){option=$.extend({id:"",obj:"",areaCd:"",brchNo:"",callback:"",desableAt:"Y"},option),""!=option.id&&(option.obj=$("#"+option.id)),""!=option.areaCd?$.ajaxMegaBox({url:"/on/oh/ohj/Company/theaterCdList.do",data:JSON.stringify({areaCd:option.areaCd}),success:function(result){var arrObj=[],$opt;if($.each(result.theaterCdList,function(t,e){arrObj.push($opt=$("<option>").val(e.brchNo).html(e.brchNm)),option.brchNo==e.brchNo&&$opt.attr("selected","selected")}),""!=option.obj)""==option.obj.find("option:first").val()?option.obj.find("option:first").nextAll().remove():option.obj.empty(),"Y"==option.desableAt&&option.obj.attr("disabled",0==arrObj.length),option.obj.append(arrObj);else if(""!=option.callback)try{eval(option.callback)()}catch(t){console.log(t)}}}):""==option.obj.find("option:first").val()&&option.obj.nextAll().remove()},gfn_getTighlight=function(a,t){var o="";return(a=$.extend({regTxt:"",type:{tag:"",css:""}},a)).chgTxt="<"+a.type.tag+' class="'+a.type.css+'">'+a.regTxt+"</"+a.type.tag+">",a.regTxt=a.regTxt.replace(/\./gi,"\\."),a.regTxt=a.regTxt.replace(/\*/gi,"\\*"),a.regTxt=a.regTxt.replace(/\?/gi,"\\?"),a.regTxt=a.regTxt.replace(/\^/gi,"\\^"),a.regTxt=a.regTxt.replace(/\|/gi,"\\|"),a.regTxt=a.regTxt.replace(/\(/gi,"\\("),a.regTxt=a.regTxt.replace(/\)/gi,"\\)"),a.regTxt=a.regTxt.replace(/\[/gi,"\\["),a.regTxt=a.regTxt.replace(/\{/gi,"\\{"),a.regTxt=a.regTxt.replace(/\}/gi,"\\}"),$.each(t.split("&"),function(t,e){var n=e.indexOf(";");-1==n?o+=e.replace(new RegExp(a.regTxt,"gi"),a.chgTxt):(o+="&"+e.substring(0,n+1),o+=e.substring(n+1).replace(new RegExp(a.regTxt,"gi"),a.chgTxt))}),o},Constants={SEPARATOR_DATE:".",SEPARATOR_TIME:":",SEPARATOR_NUMBER:",",SEPARATOR_DEFAULT:"-"};Constants.DATE_FORMAT="yyyy"+Constants.SEPARATOR_DATE+"mm"+Constants.SEPARATOR_DATE+"dd",Constants.DATE_FORMAT_CAL="yy"+Constants.SEPARATOR_DATE+"mm"+Constants.SEPARATOR_DATE+"dd",Constants.TIME_FORMAT="hh"+Constants.SEPARATOR_TIME+"mi"+Constants.SEPARATOR_TIME+"ss",String.prototype.nvl=function(){return null==this?"":this},String.prototype.nvlNum=function(t){return null==this||""==this?t:this},String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/gi,"")},String.prototype.ltrim=function(){return this.replace(/(^\s*)/g,"")},String.prototype.rtrim=function(){return this.replace(/(\s*$)/g,"")},String.prototype.lpad=function(t,e){e=null==e?" ":e;for(var n="",a=0,o=t-this.byteLength();a<o;a++)n+=e;return n+this},String.prototype.rpad=function(t,e){e=null==e?" ":e;for(var n=this,a=0,o=t-this.byteLength();a<o;a++)n+=e;return n},String.prototype.replaceAll=function(t,e){return this.split(t).join(e)},String.prototype.removeAll=function(t){return this.replaceAll(t,"")},String.prototype.reverse=function(){for(var t="",e=this.length;0<e;)t+=this.charAt(--e);return t},String.prototype.byteLength=function(){for(var t=0,e=0;e<this.length;e++){var n=escape(this.charAt(e));1==n.length?t++:-1!=n.indexOf("%u")?t+=2:-1!=n.indexOf("%")&&(t+=n.length/3)}return t},String.prototype.byteIndexOf=function(t){var e=this.indexOf(t);return-1==e?e:this.substring(0,e).byteLength()},String.prototype.substringByte=function(t,e){for(var n="",a=0,o=0;o<this.length;o++){var i=this.charAt(o),r=a;if(a+=i.byteLength(),t<=r&&a<=e)n+=i;else if(e<a)break}return n},String.prototype.substrByte=function(t,e){return this.substringByte(t,t+e)},String.prototype.defaultString=function(t){return""==this.trim()?t:this},String.prototype.toInt=function(){return""==this.trim()?0:parseInt(this.trim(),10)},String.prototype.toHex=function(){return this.toRadix(16)},String.prototype.toRadix=function(t){return Number(this).toString(t).toUpperCase()},String.prototype.isEmpty=function(){return 0==this.trim().length},String.prototype.toNumber=function(){return this.isNumber()?Number(this.unmask("real")):0},String.prototype.toDate=function(){var t=this.unmask("dateymd"),e=t.substr(0,4).toNumber(),n=t.substr(4,2).defaultString("0").toNumber()-1,a=t.substr(6,2).defaultString("1").toNumber();return new Date(e,n,a)},String.prototype.toDateTime=function(t){var e,n,a,o="",i="",i=t?(o=this,t):(o=this.split(" ")[0].unmask("dateymd"),this.split(" ")[1].unmask("timehms")),r=o.substr(0,4).toNumber(),s=o.substr(4,2).toNumber()-1,l=o.substr(6,2).toNumber(),c=new Date(r,s,l);return i&&(e=i.substr(0,2).toNumber(),n=i.substr(2,2).toNumber(),a=i.substr(4,2).toNumber(),c.setHours(e,n,a)),c},String.prototype.isDigit=function(){return!!this.isEmpty()||-1!=this.search(/^\d+$/)},String.prototype.isInt=function(){return!!this.isEmpty()||-1!=this.search(/^(?:\-?|\+?)\d+$/)},String.prototype.isDouble=function(t,e){return!!this.isEmpty()||(oriStr=this.removeAll(","),fracStr=0<=oriStr.indexOf(".")?(decStr=oriStr.substring(0,oriStr.indexOf(".")),oriStr.substring(oriStr.indexOf(".")+1)):(decStr=oriStr,""),!(t<decStr.length||e<fracStr.length)&&!isNaN(oriStr))},String.prototype.isNumber=function(){return!!this.isEmpty()||!isNaN(this)},String.prototype.isCardNo=function(){return!!this.isEmpty()||-1!=this.search(/^\d{4}\-?\d{4}\-?\d{4}\-?\d{4}$/)},String.prototype.isIdNo=function(){if(this.isEmpty())return!0;if(-1==this.search(/^\d{6}\-?\d{7}$/))return!1;for(var t=this.removeAll("-"),e=0,n=0;n<t.length-1;n++)e+=t.charAt(n)*(n%8+2);return t.charAt(12)==(11-e%11)%10},String.prototype.isBizNo=function(){if(this.isEmpty())return!0;if(-1==this.search(/^\d{3}\-?\d{2}\-?\d{5}$/))return!1;for(var t=this.removeAll("-"),e=new Array(1,3,7,1,3,7,1,3,5,1),n=0,a=0;a<t.length;a++)n+=t.charAt(a)*e[a]%10,8==a&&(n+=Math.floor(t.charAt(a)*e[a]/10));return n%10==0},String.prototype.isCorpNo=function(){if(this.isEmpty())return!0;if(-1==this.search(/^\d{6}\-?\d{7}$/))return!1;for(var t=this.removeAll("-"),e=0,n=0;n<t.length-1;n++)e+=t.charAt(n)*(n%2+1);return t.charAt(12)==10-e%10},String.prototype.escape=function(t){return t.replace(/('|\\)/g,"\\$1")},String.prototype.isZipNo=function(){return!!this.isEmpty()||-1!=this.search(/^\d{3}\-?\d{3}$/)},String.prototype.isPhoneNo=function(){return!!this.isEmpty()||-1!=this.search(/^(?:0\d{1,2}\-?\d{2,4}|\d{2,4})\-?\d{4}$/)},String.prototype.isHpPhoneNo=function(){return!!this.isEmpty()||-1!=this.search(/^01(?:0|1|[6-9])(?:\d{3}|\d{4})\d{4}$/)},String.prototype.isYMD=function(){if(this.isEmpty())return!0;if(-1==this.search(/^(\d{4})[\/|\-|.]?(\d{2})[\/|\-|.]?(\d{2})$/))return!1;return!(12<RegExp.$2||RegExp.$2<1)&&(!(RegExp.$3>[31,29,31,30,31,30,31,31,30,31,30,31][RegExp.$2-1]||RegExp.$3<1)&&!(2==RegExp.$2&&28<RegExp.$3&&(RegExp.$1%4!=0||RegExp.$1%100==0&&RegExp.$1%400!=0)))},String.prototype.isYM=function(){return!!this.isEmpty()||-1!=this.search(/^(\d{4})[\/|\-|.]?(\d{2})$/)&&!(12<RegExp.$2||RegExp.$2<1)},String.prototype.isMD=function(){if(this.isEmpty())return!0;if(-1==this.search(/^(\d{2})[\/|\-|.]?(\d{2})$/))return!1;return!(12<RegExp.$1||RegExp.$1<1)&&!(RegExp.$2>[31,29,31,30,31,30,31,31,30,31,30,31][RegExp.$1-1]||RegExp.$2<1)},String.prototype.isHMS=function(){return!!this.isEmpty()||-1!=this.search(/^([0|1|2]\d):?(\d{2})?:?(\d{2})?$/)&&!(23<RegExp.$1||59<RegExp.$2||59<RegExp.$3)},String.prototype.isMS=function(){return!!this.isEmpty()||-1!=this.search(/^(\d{2}):?(\d{2})$/)&&!(59<RegExp.$1||59<RegExp.$2)},String.prototype.isEmail=function(){if(this.isEmpty())return!0;var t='[^\\s\\(\\)><@,;:\\\\\\"\\.\\[\\]]+',e="("+t+'|("[^"]*"))',n=new RegExp("^"+e+"(\\."+e+")*$"),a=(new RegExp("^"+t+"(\\."+t+")*$"),this.match(/^(.+)@(.+)$/));if(null==a)return!1;for(var o=a[1],i=a[2],r=0;r<o.length;r++)if(127<o.charCodeAt(r))return!1;for(r=0;r<i.length;r++)if(127<i.charCodeAt(r))return!1;if(null==o.match(n))return!1;var s=i.match(/^\[(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})\]$/);if(null!=s){for(r=1;r<=4;r++)if(255<s[r])return!1;return!0}var l=new RegExp("^"+t+"$"),c=i.split("."),m=c.length;for(r=0;r<m;r++)if(-1==c[r].search(l))return!1;return(2==c[c.length-1].length||-1!=c[c.length-1].search(/^(com|net|org|edu|int|mil|gov|arpa|biz|aero|name|coop|info|pro|museum)$/))&&2<=m},String.prototype.isFormat=function(){if(this.isEmpty())return!0;for(var formatStr=arguments[0].split("-"),searchStr="this.search(/^",_i=0;_i<formatStr.length;_i++)searchStr+=0==_i?"\\d{"+formatStr[_i]+"}":"\\-?\\d{"+formatStr[_i]+"}";return searchStr+="$/) != -1;",eval(searchStr)},String.prototype.mask=function(t){var e=null;if(0<=t.indexOf("(")&&0<=t.indexOf(")")){var n=t.substring(t.indexOf("(")+1,t.indexOf(")"));t=t.substring(0,t.indexOf("(")),e=this.maskFormat(n)}else switch(t.toLowerCase()){case"number":case"numberdot":case"numberplus":break;case"amtplus":case"amt":case"amtdot":e=this.maskNumber();break;case"ymdhms":case"ymdhm":e=this.maskDateTime();break;case"dateymd":case"dateym":e=this.maskDate();break;case"datemd":e=this.maskDateMD();break;case"timehms":case"timehm":case"timems":e=this.maskTime();break;case"telno":case"hpno":e=this.maskPhoneNo();break;case"cardno":e=this.maskCardNo();break;case"idno":case"corpno":e=this.maskIdNo();break;case"bizno":e=this.maskBizNo();break;case"corp":e=this.maskIdNo();break;case"zipno":e=this.maskZipNo();break;default:e=this}return null!=e&&"undefined"!=e||(e=this),e},String.prototype.unmask=function(t){var e=null;if(0<=t.indexOf("(")&&0<=t.indexOf(")"))e=this.removeAll(Constants.SEPARATOR_DEFAULT);else switch(t.toLowerCase()){case"number":case"numberdot":case"numberplus":case"amt":e=this.removeAll(Constants.SEPARATOR_NUMBER);break;case"dateymd":case"dateym":case"datemd":e=this.removeAll(Constants.SEPARATOR_DATE);break;case"timehms":case"timehm":case"timems":e=this.removeAll(Constants.SEPARATOR_TIME);break;case"telno":case"hpno":case"cardno":case"idno":case"bizno":case"corpno":case"zipno":e=this.removeAll(Constants.SEPARATOR_DEFAULT);break;default:e=this.trim()}return null!=e&&"undefined"!=e||(e=this),e},String.prototype.maskNumber=function(){var t=this.removeAll(Constants.SEPARATOR_NUMBER),e="-"==(e=t.charAt(0))||"+"==e?(t=t.substr(1),"+"==e?"":"-"):"",n=t.indexOf("."),a="";if(-1<n&&(a=t.substr(n),t=t.substr(0,n)),t.length<=3)return e+t+a;for(var o=t.reverse(),i="",r=0,s=o.length;r<s;r+=3)i+=o.substr(r,3),r+3<s&&(i+=Constants.SEPARATOR_NUMBER);return e+i.reverse()+a},String.prototype.maskDateTime=function(){var t=this.removeAll(Constants.SEPARATOR_DATE).removeAll(Constants.SEPARATOR_TIME).removeAll(" "),e=t.substring(0,8),n=t.substring(8);return e.maskDate()+" "+n.maskTime()},String.prototype.maskDate=function(){var t=this.removeAll(Constants.SEPARATOR_DATE),e=t.length;return e<=4?t:e<=6?t.substr(0,4)+Constants.SEPARATOR_DATE+t.substr(4):e<=8?t.substr(0,4)+Constants.SEPARATOR_DATE+t.substr(4,2)+Constants.SEPARATOR_DATE+t.substr(6):void 0},String.prototype.maskDateMD=function(){var t=this.removeAll(Constants.SEPARATOR_DATE),e=t.length;return e<=2?t:e<=4?t.substr(0,2)+Constants.SEPARATOR_DATE+t.substr(2):void 0},String.prototype.maskTime=function(){var t=this.removeAll(Constants.SEPARATOR_TIME),e=t.length;return e<=2?t:e<=4?t.substr(0,2)+Constants.SEPARATOR_TIME+t.substr(2):t.substr(0,2)+Constants.SEPARATOR_TIME+t.substr(2,2)+Constants.SEPARATOR_TIME+t.substr(4,2)},String.prototype.maskPhoneNo=function(){var t=this.removeAll(Constants.SEPARATOR_DEFAULT),e=0,n="";return"02"==t.substr(0,2)?(n+=t.substr(0,2)+Constants.SEPARATOR_DEFAULT,e=2):"0"==t.charAt(0)&&(n+=t.substr(0,3)+Constants.SEPARATOR_DEFAULT,e=3),t.substr(e).length<4?n+=t.substr(e):t.substr(e).length<8?n+=t.substr(e,3)+Constants.SEPARATOR_DEFAULT+t.substr(e+3):n+=t.substr(e,4)+Constants.SEPARATOR_DEFAULT+t.substr(e+4),n},String.prototype.maskCardNo=function(){var t=this.removeAll(Constants.SEPARATOR_DEFAULT);return t.length<=4?t:t.length<=8?t.substr(0,4)+Constants.SEPARATOR_DEFAULT+t.substr(4):t.length<=12?t.substr(0,4)+Constants.SEPARATOR_DEFAULT+t.substr(4,4)+Constants.SEPARATOR_DEFAULT+t.substr(8):t.substr(0,4)+Constants.SEPARATOR_DEFAULT+t.substr(4,4)+Constants.SEPARATOR_DEFAULT+t.substr(8,4)+Constants.SEPARATOR_DEFAULT+t.substr(12)},String.prototype.maskIdNo=function(){var t=this.removeAll(Constants.SEPARATOR_DEFAULT);return t.length<=6?t:t.substr(0,6)+Constants.SEPARATOR_DEFAULT+t.substr(6)},String.prototype.maskBizNo=function(){var t=this.removeAll(Constants.SEPARATOR_DEFAULT);return t.length<=3?t:t.length<=5?t.substr(0,3)+Constants.SEPARATOR_DEFAULT+t.substr(3):t.substr(0,3)+Constants.SEPARATOR_DEFAULT+t.substr(3,2)+Constants.SEPARATOR_DEFAULT+t.substr(5)},String.prototype.maskZipNo=function(){var t=this.removeAll(Constants.SEPARATOR_DEFAULT);return t.length<=3?t:t.substr(0,3)+Constants.SEPARATOR_DEFAULT+t.substr(3)},String.prototype.maskFormat=function(){for(var t=this.removeAll(Constants.SEPARATOR_DEFAULT),e=arguments[0].split("-"),n="",a=0,o=0;o<e.length;o++){if(a+parseInt(e[o])>=t.length)return n+=0==o?t.substring(a,a+parseInt(e[o])):"-"+t.substring(a,a+parseInt(e[o]));n+=0==o?t.substring(a,a+parseInt(e[o])):"-"+t.substring(a,a+parseInt(e[o])),a+=parseInt(e[o])}return n},String.prototype.format=function(t,n){n=n||"X";var a=this;if(a.length!=t.length-t.removeAll(n).length)return a;var o=0;return t.split("").map(function(t,e){return t==n?a.charAt(o++):t}).join("")},String.prototype.posterFormat=function(t){if(null!=this&&"null"!=this&&0<this.length&&0<this.lastIndexOf(".")){if(-1<this.indexOf("/SharedImg/asis/")){var e="";return"_230"==t||"_150"==t?e=".medium":"_150"==t&&(e=".small"),-1<this.indexOf("/store")&&("_280"==t?e=".medium":"_196"==t&&(e=".small")),0<e.length?this.replaceAll(".large",e):this.replaceAll(t,".large")}return 0<this.lastIndexOf("_")?this.slice(0,this.lastIndexOf("_"))+t+this.slice(this.lastIndexOf(".")):this.slice(0,this.lastIndexOf("."))+t+this.slice(this.lastIndexOf("."))}return this},String.prototype.bokdFormat=function(){var t=this.toString();return 12!=t.length?t:t.format("XXXX-XXX-XXXXX")},String.prototype.cponFormat=function(){for(var t=this.toString(),e="XXXX",n=t.length/4-1;n--&&!(n<0);)e+="-XXXX";return t.format(e)},String.prototype.payDtFormat=function(){var t=this.toString();return 12<t.length&&(t=t.substring(0,12)),t.format("XXXX.XX.XX (XX:XX)")},String.prototype.megaFormat=function(t,e){var n=this.toString(),a=n.length;if(8!=a&&12!=a&&14!=a)return n;var o=n.substring(0,8);o+=void 0!==t&&"en"==t?["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date(o.format("XXXX-XX-XX")).getDay()]:["일","월","화","수","목","금","토"][new Date(o.format("XXXX-XX-XX")).getDay()];var i="";return 8<a&&(i=n.substring(8),i=12==a?i.format(" XX:XX"):i.format(" XX:XX:XX")),n="M"==e?(o=o.substring(4),void 0!==t&&"en"==t?o.format("XX.XX (XXX)")+i:o.format("XX.XX (X)")+i):void 0!==t&&"en"==t?o.format("XXXX.XX.XX (XXX)")+i:o.format("XXXX.XX.XX (X)")+i},String.prototype.escapeHtml=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\"/g,"&quot;")},String.prototype.unescapeHtml=function(){return this.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#40;/g,"(").replace(/&#41;/g,")").replace(/&#35;/g,"#").replace(/&#39;/g,"'")},Date.day,Date.prototype.getSystemDate=function(){var t=new Date($.ajaxMegaBox({url:"/getSystemDate",async:!0}).responseJSON.sysDate.toDay);return Date.day&&t.formatDate()===Date.day.formatDate()?Date.day:Date.day=t},Date.prototype.formatDate=function(t){var e=this;t=t||Constants.DATE_FORMAT;var n=e.getMonth()+1,a=e.getFullYear();-1<(t=t.replaceAll("mm",n.toString().lpad(2,"0"))).indexOf("yyyy")?t=t.replace("yyyy",a.toString()):-1<t.indexOf("yy")&&(t=t.replace("yy",a.toString().substr(2,2))),t=t.replace("dd",e.getDate().toString().lpad(2,"0"));var o=e.getHours();return-1<t.indexOf("t")&&(t=11<o?t.replace("t","pm"):t.replace("t","am")),-1<t.indexOf("hh")&&(t=t.replace("hh",o.toString().lpad(2,"0"))),-1<t.indexOf("hh")&&(0==o&&(o=12),t=t.replace("hh",o.toString().lpad(2,"0"))),-1<t.indexOf("mi")&&(t=t.replace("mi",e.getMinutes().toString().lpad(2,"0"))),-1<t.indexOf("ss")&&(t=t.replace("ss",e.getSeconds().toString().lpad(2,"0"))),t},Number.prototype.format=function(){if(0==this)return 0;for(var t=/(^[+-]?\d+)(\d{3})/,e=this+"";t.test(e);)e=e.replace(t,"$1"+Constants.SEPARATOR_NUMBER+"$2");return e},Number.prototype.round=function(t){if(0<t){var e=this.toFixed(t+1).match(new RegExp("(-?\\d*).(\\d{"+t+"})(\\d)\\d*$"));if(e&&e.length)return new Number(e[1]+"."+String(Math.round(e[2]+"."+e[3])).lpad(t,"0"))}return this},Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),n=e.length,a=new Array(n);n--;)a[n]=[e[n],t[e[n]]];return a}),Object.fromEntries||(Object.fromEntries=function(t){for(var e=t.length,n={};e--;)n[t[e][0]]=t[e][1];return n}),Math.sign=function(t){return 0<t?1:0==t?0:-1},$.getScript("/static/mb/js/lozad.min.js"),$(function(){$.datepicker.regional.ko={closeText:"닫기",prevText:"이전달",nextText:"다음달",currentText:"오늘",monthNames:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],monthNamesShort:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayNames:["일","월","화","수","목","금","토"],dayNamesShort:["일","월","화","수","목","금","토"],dayNamesMin:["일","월","화","수","목","금","토"],weekHeader:"Wk",dateFormat:Constants.DATE_FORMAT_CAL,firstDay:0,isRTL:!1,duration:200,showAnim:"show",showMonthAfterYear:!0,yearSuffix:"년",showOtherMonths:!0,selectOtherMonths:!0},$.datepicker.setDefaults($.datepicker.regional.ko)}),$.fn.megaBoxNumberCheck=function(){$(this).on("keypress",function(t){if(!t.key.isNumber())return!1}),$(this).on("keyup",function(t){var e;t.key&&!t.key.isNumber()&&(e=$(this).val(),$(this).val(e.replace(/[^0-9]/gi,"")))}),$(this).on("focusout",function(t){$(this).val($(this).val().replace(/[^0-9]+/g,""))})},$.fn.passTrim=function(){$(this).on("keypress",function(t){if(-1<t.key.indexOf(" "))return!1}),$(this).on("keyup",function(t){var e=$(this).val();$(this).val(e.replace(/(^\s*)|(\s*$)/gi,""))}),$(this).on("focusout",function(t){$(this).val($(this).val().replace(/(^\s*)|(\s*$)/gi,""))})},$.fn.megaBoxNumberHPCheck=function(){$(this).on("keypress",function(t){if(!t.key.isNumber())return!1}),$(this).on("keyup",function(t){var e;t.key.isNumber()||(e=$(this).val(),$(this).val(e.replace(/[^0-9]/gi,"")))}),$(this).on("focusout",function(t){$(this).val($(this).val().replace(/\B(?=(\d{4})+(?!\d))/g,"-"))}),$(this).on("focusin",function(t){$(this).val($(this).val().replace(/[-]/g,""))})},$.fn.megaBoxPwdCheck=function(){var t=/[^0-9a-zA-Z~!@#$%^&*+=\-?_]/gi;if(new RegExp(t).test($(this).val())){if($(this).val($(this).val().replace(t,"")),$(this).hasClass("unclickable"))return;$(this).addClass("unclickable"),$(this).data("ui-tooltip")&&($(this).tooltip("open"),setTimeout(function(){$(this).tooltip("close"),$(this).removeClass("unclickable")}.bind(this),1e3)),$(this).next(".tooltiptext").length&&$(this).next(".tooltiptext").fadeIn(function(){setTimeout(function(){$(this).next(".tooltiptext").fadeOut(),$(this).removeClass("unclickable")}.bind(this),1e3)}.bind(this))}};var clickLmtAt=!0,clickLmtUrl;function clearLmt(){clickLmtAt=!0}function sessionAllow(t){var a="";return!!t.commAt||(null!=t.url&&-1<t.url.indexOf("/MbLogin")||(!t.sessionAt&&0!=location.pathname.indexOf("/mypage")&&0!=location.pathname.indexOf("/myMegabox")||$.ajax({url:"/sessionChk.do",type:"POST",contentType:"application/json;charset=UTF-8",dataType:"json",async:!1,success:function(t,e,n){"Y"==t.loginYn||(a="로그인 후 이용가능한 서비스입니다.")},error:function(t,e,n){a="잘못된 접근입니다."}}),""==a||(gfn_alertMsgBox(a,function(){0!=location.pathname.indexOf("/mypage")&&0!=location.pathname.indexOf("/myMegabox")||("MON"==sysCd?AppHandler.Common.goMain():location.href="/")}),!1)))}$.ajaxMegaBox=function(t){var i=$.extend({url:"",type:"POST",method:"POST",contentType:"application/json; charset=UTF-8",dataType:"json",secure:"N",data:{},processData:!0,async:!0,cache:!0,global:!0,jsonp:null,jsonpCallback:null,complete:null,success:null,error:null,errorMsgYn:!0,sessionAt:!1,commAt:!1,clickLmtChk:!1},t);if(i.clickLmtChk){if(!clickLmtAt&&clickLmtUrl==i.url)return void gfn_alertMsgBox("중복 클릭 방지");clickLmtAt=!1,clickLmtUrl=i.url,setTimeout(clearLmt,3e3)}var e="";""==i.url&&(e="Y"==i.secure?-1<location.hostname.indexOf("localhost")?"https://"+location.hostname+":443":"https://"+location.hostname:-1<location.hostname.indexOf("localhost")?"http://"+location.host:"http://"+location.hostname),i.url=e+i.url,sessionAllow(i)&&$.ajax($.extend(i,{error:function(t,e,n){try{var a,o;i.errorMsgYn?(a=JSON.parse(t.responseText),(o={}).msg=a.msg,o.param={xhr:t,status:e,error:n,setting:i},MegaboxUtil.Common.isMobile()?AppHandler.Common.alert(gfn_scrtDecode(a.msg)):gfn_alertMsgBox(o)):i.error&&i.error(t,e,n)}catch(t){console.log("ajaxMegaBox Exception")}0<$("#bg-loading").length&&gfn_logdingModal()}}))},$.event.special.doubleTap={bindType:"touchend",delegateType:"touchend",handle:function(e){var t=e.handleObj,n=jQuery.data(e.target),a=(new Date).getTime(),o=n.lastTouch?a-n.lastTouch:0,i=null==i?300:i;o<i&&30<o?(n.lastTouch=null,e.type=t.origType,["clientX","clientY","pageX","pageY"].forEach(function(t){e[t]=e.originalEvent.changedTouches[0][t]}),t.handler.apply(this,arguments)):n.lastTouch=a}};var Common=function(){var n=!1;this.bindSelectBox=function(t){var e=$.extend({obj:$("select"),size:10},t);e.obj.selectpicker({dropdownAlignRight:"auto",dropupAuto:!0,size:e.size})},this.refreshSelectBox=function(t){t.selectpicker("refresh")},this.strByteLength=function(t){var e,n=0,a=t.length;if(0==a)return 0;for(var o=0;o<a;++o)e=t.charAt(o),4<escape(e).length?n+=2:n++;return n},this.strByteLengthGetLen=function(t,e){var n,a=t.length,o={length:0,totalByte:0};if(0==a)return o;for(var i=0;i<a&&(n=t.charAt(i),o.length=i,4<escape(n).length?o.totalByte+=2:o.totalByte++,!(o.totalByte>e));++i);return o},this.isMobile=function(){var n=!1;return $.each(["iPad","iPhone","Android"],function(t,e){if(-1<navigator.userAgent.indexOf(e))return n=!0}),n},this.isApp=function(){var t=!1;return-1<navigator.userAgent.indexOf("MegaBox")||t},this.alert=function(t,e){MegaboxUtil.Common.isMobile()?t instanceof Object?t.confirmFn&&t.param.confirm?confirm(t.msg)?t.confirmFn(t.param.confirm):t.confirmFn(t.param.cancelFn):t.callback&&t.param.confirm&&(t.msg&&alert(t.msg),t.callback(t.param.confirm)):MegaboxUtil.Common.isApp()?AppHandler.Common.alert(t):alert(t):(n=e,gfn_alertMsgBox(t,MegaboxUtil.Common.alerCallback))},this.alerCallback=function(){n&&location.reload()},this.bindNumberTypeEvent=function(){$(".numType").on("keyup",function(){this.bfVal;isNaN(this.value)&&$(this).val("")}).on("keydown",function(){this.bfVal=this.value})},this.bindTextateaLengthEvent=function(t){var e=$.extend({objId:"textarea",cntId:"textareaCnt",obj:"",cnt:"",maxLen:2e3},t);""==e.obj&&(e.obj=$("#"+e.objId)),""==e.cnt&&(e.cnt=$("#"+e.cntId)),e.obj.on("change input",function(){var t=MegaboxUtil.Common.strByteLengthGetLen(this.value,e.maxLen);t.totalByte>e.maxLen?(MegaboxUtil.Common.alert("최대 "+e.maxLen+"byte까지 입력 가능합니다."),this.value=this.value.substring(0,t.length),e.cnt.text(MegaboxUtil.Common.strByteLength(this.value))):e.cnt.text(t.totalByte)})},this.bindTextateaLengthEventSubStr=function(t,e){var n=t?"#"+t:"#textarea",a=$.extend({maxLen:2e3},e);$(n).bind("change keyup input",function(t){var e=MegaboxUtil.Common.strByteLengthGetLen(this.value,a.maxLen);console.log("result : "+e.length+" : "+$(this).val()+" : "+$(this).val().substr(e.length)),e.totalByte>a.maxLen?(MegaboxUtil.Common.alert("최대 "+a.maxLen+"byte까지 입력 가능합니다."),$(this).val($(this).val().substr(0,e.length)),$("#textareaCnt").text(a.maxLen)):$("#textareaCnt").text(e.totalByte)})},this.selectList=function(t){$.ajaxMegaBox({type:"POST",contentType:"application/json;charset=UTF-8",url:t.url,dataType:"json",data:JSON.stringify(t.data),async:!0,success:t.success,error:t.error?t.error:e})};var e=function(t,e,n){MegaboxUtil.Common.alert("오류가 발생하였습니다.")};this.isPaging=function(t,e,n){return t<Math.ceil(n/e)},this.moveMovieFilmCheckGnb=function(){var e=!0;return $.ajaxMegaBox({url:"/on/oh/oha/Movie/selectFilmfsvList.do",async:!1,success:function(t){e=0<t.list.length}}),e},this.moveMovieFilmCheck=function(){$.ajaxMegaBox({url:"/on/oh/oha/Movie/selectFilmfsvList.do",success:function(t){0<t.list.length?location.href="/festival":MegaboxUtil.Common.alert("현재 진행중인 영화제가 없습니다.")}})}},Form=function(){var n,e=/((?=.{10,})(?=.*[0-9])(?=.*[a-zA-Z])(?!.*[^0-9a-zA-Z~!@#$%^&*+=\-_?]).*$)|((?=.{10,})(?=.*[~!@#$%^&*+=\-_?])(?=.*[a-zA-Z])(?!.*[^0-9a-zA-Z~!@#$%^&*+=\-_?]).*$)|((?=.{10,})(?=.*[!@#$%^&*+=\-_?])(?=.*[0-9])(?!.*[^0-9a-zA-Z~!@#$%^&*+=\-_?]).*$)/gi,i={id:/^(?=.*[0-9])[a-zA-Z0-9]{8,12}$/gi,pw:e,email:/((?=.{3,})(?=.*[@])(?=.*[\.]).*$)/gi};this.createForm=function(){var t=$("<form>").attr({name:"movieForm",method:"post"});return $("body").append(t),t},this.getForm=function(t){return $(document.forms[t])},this.send=function(t,e){null==(n=e).headers&&(e.headers=null),$.ajaxMegaBox({url:e.url,data:JSON.stringify(e.data),clickLmtChk:!!e.clickLmtChk&&e.clickLmtChk,headers:e.headers?e.headers:null,success:e.success?e.success:a,error:e.error?e.error:o,complete:e.complete?e.complete:clearLmt})};var a=function(t){MegaboxUtil.Common.alert(n.sMsg?n.sMsg:"저장 되었습니다.",!0)},o=function(){MegaboxUtil.Common.alert(n.eMsg?n.eMsg:"오류가 발생하였습니다.")};this.getFormObjData=function(t){var e=t.serializeArray(),n={};return $.each(e,function(t,e){n[e.name]=e.value,"lentDe"==e.name&&(n[e.name]=e.value.replace(/[-,.]/gi,""))}),n},this.checkInputNonData=function(n){var a=!1,t=MegaboxUtil.Form.getFormObjData(n);return $.map(t,function(t,e){if(input=n.find("[name="+e+"]"),""==n.find("[name="+e+"]").val())return a=!0}),a},this.createInput=function(n,a){var o,i,r,t=MegaboxUtil.Form.getFormObjData(n);$.map(t,function(t,e){o=a.find("[name="+e+"]"),i=n.find(s(n,e)),r=i&&""==t?"N":t,0==o.length?(o=$("<input>").attr({type:"hidden",name:e}).val(r),a.append(o)):o.val(r)})},this.getInputString=function(t){var e=MegaboxUtil.Form.getFormObjData(t),n="";return $.map(e,function(t,e){n+="^"+e+"|"+t}),n};var s=function(t,e){var n=0<$(t).find("input[type=radio][name="+e+"]").length||0<$(t).find("input[type=checkbox][name="+e+"]").length;return n};this.validRegForm=function(t,a){var o,i=!0;return $.each(t,function(t,e){if(e.target instanceof Array){for(var n=0;n<e.target.length;++n)if(o=a?a.find(e.target[n]):$(e.target[n]),!r(o,e.msg))return i=!1}else{if(o=a?a.find(e.target):$(e.target),!r(o,e.msg))return i=!1;if(e.pattern&&!MegaboxUtil.Form.vlidRegDataCheck(o,e.pattern,!0))return i=!1;if(e.eq&&o.val()!=$(e.eq.target).val())return MegaboxUtil.Common.alert(e.eq.msg),i=!1}}),i};var r=function(t,e){var n=!0;return""!=t.val().trim()&&null!=t.val()||(n=!1,"lentDe"!=t.attr("name")&&t.focus(),MegaboxUtil.Common.alert(e)),n};this.vlidRegDataCheck=function(t,e,n){var a=e.msg,o=!0;return new RegExp(i[e.id]).test(t.val())||(n&&MegaboxUtil.Common.alert(a),o=!1),o},this.validatePwdString=function(t){return!!new RegExp(e).test(t)}},Movie=function(){var n,u='<li tabindex="0" class="no-img"><div class="movie-list-info">    <p class="rank" style="display: none">boxoRank<span class="ir">위</span></p>    <img src="posterPathData" alt="movieNm" class="poster lozad" onerror="noImg(this)" />    <div class="curation">        <p class="film" style="display: none">필름 소사이어티</p>        <p class="classic" style="display: none">클래식 소사이어티</p>    </div>    <div class="screen-type2">        <p name="dbcScrean" style="display: none"><img src="/static/pc/images/common/btn/mov_top_tag_db.png" alt="dolby" /></p>        <p name="mxScreen"  style="display: none"><img src="/static/pc/images/common/btn/mov_top_tag_mx.png" alt="mx" /></p>    </div>    <div class="movie-score">        <a href="#" class="wrap movieBtn" data-no="movieNo" title="aTag_title">            <div class="summary">movieSynopCn</div>            <div class="my-score pointClass">                <div class="preview">                    <p class="tit">관람평</p>                    <p class="number">admisYSpoint<span class="ir">점</span></p>                </div>            </div>        </a>    </div></div><div class="tit-area">    <p class="movie-grade admisClass">admisText</p>    <p title="movieNm" class="tit">movieNm</p></div><div class="rate-date">    <span class="rate">예매율 boxoBokdRt&#37;</span>    <span class="date">개봉일 rfilmDe</span></div><div class="btn-util">    <button type="button" class="button btn-like" data-no="movieNo"><i title="보고싶어 intrstText" class="iconset ico-heart-toggle-gray intrstType"></i> <span>intrstCnt</span></button>    <p class="txt movieStat1" style="display: none">상영예정</p>    <p class="txt movieStat2" style="display: none">monthDe월 개봉예정</p>    <p class="txt movieStat5" style="display: none">개봉예정</p>    <p class="txt movieStat6" style="display: none">상영종료</p>    <div class="case col-2 movieStat3" style="display: none">        <a href="#" class="button purple bokdBtn" data-no="movieNo" title="영화 예매하기">예매</a>        <a href="#" class="button purple img splBtn" data-no="movieNo"><img src="/static/pc/images/common/btn/mov_list_db_btn.png" alt="dolby 버튼" /></a>    </div>    <div class="case movieStat4" style="display: none">        <a href="#" class="button purple bokdBtn" data-no="movieNo" title="영화 예매하기">예매</a>    </div></div></li>';this.setImgSvrUrl=function(t){n=t},this.createHtml=function(t,a,e,o){var i,r,s,l,c,m,p=n||"";imgPathAr=[],e||MegaboxUtil.Movie.removeHtml(a),$.each(t,function(t,e){i=u.concat(),e.imgPathNm&&e.imgPathNm,c=e.boxoBokdRt?e.boxoBokdRt:0,"MSC02"==e.onairYn||"classic"==e.specialType||"film"==e.specialType||"Y"==e.movienmSearchYn||"Y"==e.festivalYn?i=i.replaceAll(/boxoRank/,""):e.boxoRank&&(i=i.replaceAll(/boxoRank/,e.rowNum)),i=(i=(i=i.replaceAll(/posterPathData/,p+nvl(e.imgPathNm).posterFormat("_420"))).replaceAll(/movieNm/,e.movieNm)).replaceAll(/movieSynopCn/,e.movieSynopCn),r=e.admisNSpoint>e.admisYSpoint?"smal":e.admisNSpoint<e.admisYSpoint?"big":"equa",i=(i=(i=i.replaceAll(/pointClass/,r)).replaceAll(/admisNSpoint/,e.admisNSpoint)).replaceAll(/admisYSpoint/,e.admisYSpoint),"AD01"==e.admisClassCd?s="age-all":"AD02"==e.admisClassCd?s="age-12":"AD03"==e.admisClassCd?s="age-15":"AD04"==e.admisClassCd?s="age-19":s="age-no",i=(i=(i=i.replaceAll(/admisClass/,s)).replaceAll(/admisText/,e.admisText)).replaceAll(/boxoBokdRt/,c),i=null!=e.rfilmDe?(i=i.replaceAll(/rfilmDe/,e.rfilmDe)).replaceAll(/monthDe/,Number(e.rfilmDe.substr(5,2))):null!=e.rfilmYm?(i=i.replaceAll(/rfilmDe/,e.rfilmYm+" 월경")).replaceAll(/monthDe/,Number(e.rfilmYm.substr(5,2))):(i=i.replaceAll(/rfilmDe/,"")).replaceAll(/monthDe/,""),"Y"==e.intrstAt||o?(l="함",i=i.replaceAll(/intrstType/,"on")):l="안함",i=i.replaceAll(/intrstText/,l);var n="",n=999<e.intrstCnt?Math.floor(e.intrstCnt/1e3*10)/10+"k":e.intrstCnt;i=(i=(i=i.replaceAll(/intrstCnt/,n)).replaceAll(/movieNo/,e.rpstMovieNo)).replaceAll(/aTag_title/,e.movieNm+" 상세보기"),a.append(i),m=a.find("li").eq(Number(a.find("li").size())-1),o&&m.find(".rate-date").hide(),e.boxoRank&&!o&&m.find(".rank").show(),"Y"==e.filmAt&&"classic"!=e.specialType&&m.find(".film").show(),"Y"==e.classicAt&&"film"!=e.specialType&&m.find(".classic").show(),"Y"==e.mxTheabAt&&m.find("[name=mxScreen]").show(),"Y"==e.dbcTheabAt&&m.find("[name=dbcScrean]").show(),"MSC01"==e.movieStatCd&&"Y"==e.dbcTheabAt&&"Y"==e.bokdAbleYn?m.find(".movieStat3").show():"MSC01"==e.movieStatCd&&"Y"==e.bokdAbleYn?m.find(".movieStat4").show():"MSC02"==e.movieStatCd&&"Y"==e.dbcTheabAt&&null!=e.rfilmDeReal?m.find(".movieStat3").show():"MSC02"==e.movieStatCd&&"Y"==e.bokdAbleYn&&null!=e.rfilmDeReal?m.find(".movieStat4").show():"MSC02"==e.movieStatCd&&"N"==e.bokdAbleYn&&null!=e.rfilmDeReal?m.find(".movieStat5").show():"MSC02"==e.movieStatCd&&"N"==e.bokdAbleYn&&null==e.rfilmDeReal&&null!=e.rfilmYm?m.find(".movieStat2").show():"MSC03"==e.movieStatCd?m.find(".movieStat6").show():m.find(".movieStat1").show()}),o&&$(".tit-area .tit").each(function(t){var e=$(this).html();$(this).html("<a href='javaScript:void(0)' title='"+e+"'>"+e+"</a>")}),d(a,o)},this.removeHtml=function(t){t.empty()};var d=function(t,e){t.find(".movie-list-info").off().on({mouseenter:function(){e?$(this).find(".movie-score").finish().addClass("on"):$(this).find(".movie-score").finish().addClass("on").animate({opacity:1},300)},mouseleave:function(){e||$(this).find(".movie-score").finish().animate({opacity:0},300,function(){$(this).removeClass("on")})},focus:function(){e||$(this).find(".movie-score").finish().addClass("on").animate({opacity:1},300)},blur:function(){e||$(this).find(".movie-score").finish().animate({opacity:0},300,function(){$(this).removeClass("on")})}}),$(".btn-like").off().on("click",function(){a(this)}),$(".bokdBtn").off().on("click",function(t){t.preventDefault(),o($(this).data("no"))}),$(".splBtn").off().on("click",function(t){t.preventDefault(),o($(this).data("no"),!0)}),$(".movieBtn").off().on("click",function(t){t.preventDefault();var e=$(this).data("no");$.ajaxMegaBox({url:"/on/oh/oha/Movie/selectMovieInfoCheck.do",data:JSON.stringify({rpstMovieNo:e}),success:function(t){t.result?i(e,!0):gfn_alertMsgBox("영화정보가 존재하지 않습니다.")}})}),e&&$(".tit-area .tit").off().on("click",function(t){$(this).parent().parent().find(".movieBtn").trigger("click")})},a=function(a){$.ajaxMegaBox({url:"/on/oh/oha/Movie/mergeMovieHeart.do",data:JSON.stringify({rpstMovieNo:$(a).data("no")}),sessionAt:!0,success:function(t){var e=t.resultMap;if("sessionFail"==e.msg)return gfn_alertMsgBox("로그인 후 이용가능한 서비스입니다.");"D"==e.rowStatCd?($(a).attr("title","보고싶어 안함"),$(a).find("i").removeClass("on")):($(a).attr("title","보고싶어 함"),$(a).find("i").addClass("on"));var n="",n=999<e.intrstCnt?Math.floor(e.intrstCnt/1e3*10)/10+"k":e.intrstCnt;$(a).find("span").html(n),window.fn_selectMovieList&&fn_selectMovieList()}})},o=function(t,e){var n=MegaboxUtil.Form.createForm();n.append($("<input>").attr({type:"hidden",name:"rpstMovieNo",value:t})),n.attr("action","/booking"),e&&n.append($("<input>").attr({type:"hidden",name:"theabKindCd1",value:"DBC"})),n.submit()},i=function(t){var e=MegaboxUtil.Form.createForm();e.append($("<input>").attr({type:"hidden",name:"rpstMovieNo",value:t})),e.attr("method","get"),e.attr("action","/movie-detail"),e.submit()};this.bindMyViewMovieEvent=function(t,e){MegaboxUtil.Common.bindNumberTypeEvent(),$("#"+t).off().on("click",function(t){if("Y"!=$("#isLogin").val())return gfn_alertMsgBox("로그인후 이용 가능한 서비스입니다."),!1}),r()};var r=function(){$("#movie_regi").val(""),$("#movie_regi").next().off().on("click",function(){var t=$("#movie_regi").val();if(""==t)return gfn_alertMsgBox("거래번호 또는 예매번호를 입력해주세요.");$.ajaxMegaBox({url:"/on/oh/ohb/Movie/insertAdmisMovie.do",data:JSON.stringify({tranNo:t}),clickLmtChk:!0,success:function(t){var e;"admisY"==t.result?gfn_alertMsgBox("이미 등록된 영화입니다."):"noTranNo"==t.result?gfn_alertMsgBox("존재하지않는 거래번호 또는 예매번호 입니다."):"playEnd"==t.result?gfn_alertMsgBox("본 영화는 상영시간 종료 후 등록하실 수 있습니다."):"complete"==t.result?gfn_alertMsgBox("더 이상 등록할 수 없는 거래번호 또는 예매번호 입니다."):((e={msg:"영화가 등록 되었습니다."}).callback=fn_callbackInsertMovies,gfn_alertMsgBox(e))},complete:function(t){clearLmt()}})})}};function fn_callbackInsertMovies(){$("#movie_regi").val(""),$("#saw_movie_regi .btn-modal-close").trigger("click"),null!=MegaboxUtil.MovieStory&&MegaboxUtil.MovieStory.createSeenMovie(),4==$(".box-border.link-movie-story em").size()&&$(".box-border.link-movie-story em:eq(0)").html(Number($(".box-border.link-movie-story em:eq(0)").html())+1)}var MoviePost=function(){var d,f=1;this.createMoviePostList=function(a,t,e,o){var i,r,s,l,n,c=t.data||null,m=0,p=(t.loginId,t.imgSvrUrl||""),u=t.moreTarget?$(document).find("#"+t.moreTarget):$(document).find(".more-movie-list");e||(a.find(".grid-item").remove(),$.each(a.find(".grid-item"),function(t,e){a.masonry("remove",e)})),null!=t.moviePostNo&&""!=t.moviePostNo&&(i="",i+='<div class="" style="display:none;">',i+='\t<a href="#layer_post_detail" class="post-detailPopup btn-modal-open2 target" w-data="850" h-data="auto" data-no="'+t.moviePostNo+'" data-url="" title="상세보기">',i+='\t\t<img src="/static/pc/images/common/bg/bg-noimage-notmain.png" alt="상세보기 이미지" onerror="noImg(this);">',i+="\t</a>",i+="</div>",a.append(i)),$.each(c,function(t,e){var n;r="Y"==e.likeYn?" on":"",f=e.currentPage,m=e.totCnt,l=e.loginId?e.loginId:e.mbNm,i="",i+='<div class="grid-item">',i+='    <div class="wrap">',"Y"==e.postMaskAt&&(n="",n="SPOL"==e.postMaskResnCd?"영화 내용에 대한 스포일러가 포함되어 있어 내용을 표시하지 않습니다.":"SLAN"==e.postMaskResnCd?"비방,욕설,선정적 내용이 포함되어 있어 내용을 표시하지 않습니다.":"ADVT"==e.postMaskResnCd?"광고, 홍보성 내용이 포함되어 있어 내용을 표시하지 않습니다.":"NOTA"==e.postMaskResnCd?"작성된 내용이 무의미한 문자의 나열로 구성되어 내용을 표시하지 않습니다.":"관리자가 내용의 표시를 차단했습니다.",i+='<div class="warning">',i+='    <div class="table">',i+='        <div class="inner-text">',i+='            <i class="iconset ico-ping-triangle"></i>',i+="            <p>"+n+"</p>",i+="        </div>",i+="    </div>",i+="</div>"),s="MOVIEPOST"==e.moviePostImgDivCd?e.imgPath:nvl(e.imgPath).posterFormat("_230"),i+='        <div class="img">',i+='            <a href="#layer_post_detail" title="무비포스트 상세보기" class="post-detailPopup btn-modal-open2"  w-data="850" h-data="auto" data-no="'+e.moviePostNo+'" data-row="'+e.rowNum+'" data-tot="'+e.totCnt+'" data-url="'+o+'"><img src="'+p+s+'" alt="'+e.moviePostMovieTitle+'" onerror="noImg(this);"> /></a>',i+="        </div>",i+='        <div class="cont">',i+='            <div class="writer">',i+='                <a href="#" title="'+l+'님의 무비포스트 보기" class="moviePostId" data-id="'+e.mbUid+'">'+l+"</a>","Y"==e.isMy&&(i+='<p class="my">my</p>'),i+="            </div>","Y"!=e.maniaAt&&"Y"!=e.edtpikAt||(i+='            <a href="#layer_post_detail" title="무비포스트 상세보기" class="link btn-modal-open2 post-detailPopup" w-data="850" h-data="auto" data-no="'+e.moviePostNo+'" data-row="'+e.rowNum+'" data-tot="'+e.totCnt+'">',i+='                <div class="label">',"Y"==e.maniaAt&&(i+='<p class="mania">Movie mania</p>'),"Y"==e.edtpikAt&&(i+='<p class="pick">Editor’s Pick</p>'),i+="                </div>",i+="            </a>"),i+='            <a href="/movie-detail?rpstMovieNo='+e.rpstMovieNo+'" title="'+e.moviePostMovieTitle+' 상세보기">',i+='                <p class="tit">'+e.moviePostMovieTitle+"</p>",i+="            </a>",i+='            <a href="#layer_post_detail" title="무비포스트 상세보기" class="link btn-modal-open2 post-detailPopup" w-data="850" h-data="auto" data-no="'+e.moviePostNo+'" data-row="'+e.rowNum+'" data-tot="'+e.totCnt+'">',null==e.moviePostImgDesc?i+='                <p class="txt">'+e.moviePostImgDesc+"</p>":i+='                <p class="txt">'+e.moviePostImgDesc.replaceAll("\n","<br>")+"</p>",i+='                <p class="time">'+e.fstRegDt+"</p>",i+="            </a>",i+='            <div class="condition">',i+='                <button type="button" class="btn-like postLikeBtn listBtn jsMake" data-no="'+e.moviePostNo+'"><i class="iconset ico-like'+r+'">좋아요 수</i> <span class="none">'+e.postRcmmCnt+"</span></button>",i+='                <a href="#layer_post_detail"  title="댓글 작성하기" class="link btn-modal-open2 post-detailRlyPopup"  w-data="850" h-data="auto" data-no="'+e.moviePostNo+'" data-row="'+e.rowNum+'" data-tot="'+e.totCnt+'"><i class="iconset ico-reply">댓글 수</i> '+e.moviePostRlyCnt+"</a>",i+="            </div>",i+="        </div>",i+="    </div>",i+="</div>",a.append(i)}),d?(n=12*(f-1),$.each(a.find(".grid-item"),function(t,e){n<=t&&a.masonry("appended",e)}),d.masonry("layout")):d=a.masonry({itemSelector:".grid-item",columnWidth:230,gutter:60}),12<m?u.show():u.hide(),g()};var g=function(){$(".postLikeBtn.jsMake").off().on("click",function(){var n=$(".postLikeBtn").index(this);$.ajaxMegaBox({url:"/on/oh/oha/Movie/mergeMoviePostHeart.do",data:JSON.stringify({artiNo:$(this).data("no"),artiDivCd:"MOPO"}),sessionAt:!0,success:function(t){var e=t.resultMap;if("sessionFail"==e.msg)return gfn_alertMsgBox("로그인 후 이용가능한 서비스입니다.");"D"==e.rowStatCd?$(".postLikeBtn").eq(n).find("i").removeClass("on"):$(".postLikeBtn").eq(n).find("i").addClass("on"),$(".postLikeBtn").eq(n).find(".none").text(e.likeCnt)}})}),$(".post-detailPopup").on("click",function(t){fn_postDetail($(this).data("no"),"post",$(this).data("url"))}),$(".post-detailRlyPopup").on("click",function(t){fn_postDetail($(this).data("no"),"rly",$(this).data("url"))}),$(".moviePostBtn").off().on("click",function(t){t.preventDefault();var e,n,a=$(document).scrollTop();""!=$(".sorting button.on").attr("sort-type")&&(n=$(".sorting button.on").attr("sort-type")),""!=$(".tab-sorting .on").data("type")&&(e=$(".tab-sorting .on").data("type"));var o=MegaboxUtil.Form.createForm();o.append('<input type="hidden" name="tabType" value="'+$("#tabType").val()+'">'),o.append('<input type="hidden" name="scrollTop" value="'+a+'">'),o.append('<input type="hidden" name="currentPage" value="'+f+'">'),o.append('<input type="hidden" name="recordCountPerPage" value="12">'),o.append('<input type="hidden" name="topSorting" value="'+e+'">'),o.append('<input type="hidden" name="orderSorting" value="'+n+'">'),o.append('<input type="hidden" name="ibxMovieNmSearch" value="'+$("#ibxMovieNmSearch").val()+'">'),o.append('<input type="hidden" name="pageType" value="'+$("#pageType").val()+'">'),o.append('<input type="hidden" name="onairYn" value="'+$("#onairYn").val()+'">'),o.attr("method","post"),o.attr("action","/moviepost/detail?moviePostNo="+$(this).data("no")+"&rowNum="+$(this).data("row")+"&totCnt="+$(this).data("tot")),o.submit()}),$(".moviePostId").off().on("click",function(t){t.preventDefault();var e=MegaboxUtil.Form.createForm();e.append('<input type="hidden" name="moviePostId" value="'+$(this).data("id")+'">'),e.attr("action","/moviepost/all"),e.submit()})}},Share=function(){this.init=function(){t()};var t=function(n){$(".tooltip-layer, .tipPin").css("z-index",302),$(".btn-sns-share-group button").off().on("click",function(t){t.preventDefault();var e=$(this).attr("class");-1<e.indexOf("kakao")?MegaboxUtil.Common.isMobile()||MegaboxUtil.Common.isApp()?MegaboxUtil.Common.alert("준비중입니다."):MegaboxUtil.Common.alert("앱에서만 사용 가능합니다."):-1<e.indexOf("face")?MegaboxUtil.Share.facebook(n):-1<e.indexOf("band")?MegaboxUtil.Share.band(n):-1<e.indexOf("twitter")?MegaboxUtil.Share.twitter(n):MegaboxUtil.Share.copyUrl(),$(this).closest(".sns-share").find(".btn-sns-share-wrap").toggleClass("on")}),$(document).on("click",function(t){var e=$(t.target);0==e.parents(".sns-share").length&&$(".btn-sns-share-wrap").removeClass("on"),0==e.parents(".after").length&&$(".layer-header-notice").removeClass("on"),0==e.parents("#layer_mymega").length&&0==e.parents(".link-area").length&&$("#header .link-area .header-open-layer.btn-layer-mymega").hasClass("on")&&($("#header .link-area .header-open-layer.btn-layer-mymega").removeClass("on"),$("#layer_mymega").removeClass("on")),0==e.parents("#layer_header_search").length&&0==e.parents(".link-area").length&&$("#header .link-area .header-open-layer.btn-layer-search").hasClass("on")&&($("#header .link-area .header-open-layer.btn-layer-search").removeClass("on"),$("#layer_header_search").removeClass("on"))})};this.copyUrl=function(){var t=location.href;-1<t.indexOf("selectMovieDetail.do")&&(t=$("#fbUrl").attr("content"));var e=document.createElement("textarea");e.style.position="absolute",e.style.left="-9999px",e.style.top="0",e.value=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),document.body.appendChild(e),e.select(),e.setSelectionRange(0,9999),document.execCommand("copy"),document.body.removeChild(e),MegaboxUtil.Common.alert("복사되었습니다.")},this.facebook=function(t){var e,n,a,o;MegaboxUtil.Common.isApp()?(0==$("#fbUrl").attr("content").indexOf("/")&&$("#fbUrl").attr("content",location.protocol+"//"+document.domain+$("#fbUrl").attr("content")),e={type:"facebook",url:$("#fbUrl").attr("content"),image:$("#fbImg").attr("content"),title:$("#fbTitle").attr("content"),description:$("#fbDtls").attr("content")},AppHandler.Common.share(e)):(0==$("#fbUrl").attr("content").indexOf("/")&&$("#fbUrl").attr("content",location.protocol+"//"+document.domain+$("#fbUrl").attr("content")),n="http://www.facebook.com/sharer/sharer.php?u="+$("#fbUrl").attr("content"),a=document.body.offsetHeight/2-215,o=document.body.offsetWidth/2-350,window.open(n,"facebookShare","width=555, height=450, toolbar=no, left="+o+", top="+a))},this.twitter=function(t){var e,n,a,o,i=$("#fbTitle").attr("content");MegaboxUtil.Common.isApp()?(e={type:"twitter",text:i,url:location.href},AppHandler.Common.share(e)):(n="https://twitter.com/intent/tweet?text="+encodeURIComponent(i)+"&url="+encodeURIComponent(location.href),a=document.body.offsetHeight/2-215,o=document.body.offsetWidth/2-350,window.open(n,"twitterShare","width=700, height=430, toolbar=no, left="+o+", top="+a))},this.band=function(t){t&&"movie"==t.type&&($("#fbImg").attr("content",t.img),$("#fbTitle").attr("content",t.title),$("#fbDtls").attr("content",t.desc));var e=$("#fbDtls").attr("content");100<e.length&&(e=e.substr(0,100)+"..."),0==$("#fbUrl").attr("content").indexOf("/")&&$("#fbUrl").attr("content",location.protocol+"//"+document.domain+$("#fbUrl").attr("content"));var n,a,o,i,r=$("#fbUrl").attr("content")+"\n"+$("#fbTitle").attr("content")+"\n"+gfn_charToHtml(e);MegaboxUtil.Common.isApp()?(n={type:"band",text:r,route:location.href},AppHandler.Common.share(n)):(a="http://www.band.us/plugin/share?body="+encodeURIComponent(r)+"&route="+location.href,o=document.body.offsetHeight/2-215,i=document.body.offsetWidth/2-350,window.open(a,"bandShare","width=700, height=430, toolbar=no, left="+i+", top="+o))}},MegaboxUtil=new function(){this.Common=new Common,this.Form=new Form,this.Movie=new Movie,this.MoviePost=new MoviePost,this.Share=new Share},Timers=function(){this.compTime={Y:31536e3,M:2592e3,D:86400,H:3600,m:60,s:1},this.event={},this.event.onRunStart=null,this.event.onRunCallBack=null,this.event.onComplete=null,this.param={},this.param.compFmt={},this.fn_init=function(t){return this.param.runKey=null,this.param.runDateTime=t.runDateTime.toDateTime(),this.param.compFmt={},this.param.exeVal=t.exeVal,this.param.exeType=t.exeType,this.param.exeIntrvl=t.exeIntrvl,this.event.onRunStart=t.onRunStart,this.event.onRunCallBack=t.onRunCallBack,this.event.onComplete=t.onComplete,isNaN(this.param.runDateTime)},this.fn_initRun=function(t){return this.param.sysDateTime=t.toDateTime(),this.param.diffTime=this.param.runDateTime-this.param.sysDateTime,this.param.startDate=new Date,this.diffTime},this.fn_DiffFmt=function(t){for(var e=t/1e3,n=Object.keys(this.compTime),a={},o=0;o<n.length;o++)e>=this.compTime[n[o]]&&(a[n[o]]=String(Math.floor(e/this.compTime[n[o]])).lpad(2,"0"),e-=a[n[o]]*this.compTime[n[o]]);return((this.param.compFmt=a).Y?a.Y+".":"")+(a.M?a.M+".":a.Y?"00.":"")+(a.D?a.D+" ":a.Y||a.M?"00 ":"")+(a.H?a.H+":":"00:")+(a.m?a.m+":":"00:")+(a.s?a.s:"00")},this.fn_workingRun=function(){var t;0<=this.param.diffTime?((t=this.param.diffTime-this.param.exeVal*this.compTime[this.param.exeType]*1e3)<=0?this.param.runKey=setInterval(function(){this.param.diffTime-=this.param.exeIntrvl,this.param.diffFmt=this.fn_DiffFmt(this.param.diffTime),this.param.diffTime<0?(this.event.onComplete(this.param),clearInterval(this.param.runKey)):this.event.onRunCallBack(this.param)}.bind(this),this.param.exeIntrvl):(this.param.diffFmt=this.fn_DiffFmt(this.param.diffTime),this.event.onRunStart(this.param),this.param.runKey=setTimeout(function(){this.param.diffTime-=t,this.param.diffFmt=this.fn_DiffFmt(this.param.diffTime),this.event.onRunCallBack(this.param),this.fn_workingRun()}.bind(this),t)),Timers.runKeyList.push(this.param.runKey)):this.event.onComplete(this.param)}};function movePage(t,e){gfn_confirmMsgBox(e,function(){fn_viewLoginPopup("default","pc")})}function gfn_setCookie(t,e,n,a){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var i="expires="+o.toUTCString();a=a?"; domain="+a:"",document.cookie=t+"="+e+"; "+i+";path=/"+a}function fn_urlTrack(t){var e=window.location.pathname;$.ajax({url:"/urlTrack"+e+t,success:function(t){}})}Timers.runKeyList=[],Timers.execute=function(t){var e=$.extend({runDateTime:null,sysDateTime:null,onRunStart:null,onRunCallBack:null,onComplete:null,exeVal:1,exeType:"D",exeIntrvl:1e3},t);if(null==e.runDateTime)return gfn_alertMsgBoxM("날짜 형식이 확인하여 주십시요.<br/> 'yyyy.MM.dd hh:mm:ss'으로 입력하여 주십시요"),!1;var a=new Timers;if(a.fn_init(e))return gfn_alertMsgBoxM("날짜 형식이 확인하여 주십시요.<br/> 'yyyy.MM.dd hh:mm:ss'으로 입력하여 주십시요"),!1;null!=e.sysDateTime?(a.fn_initRun(e.sysDateTime),a.fn_workingRun()):$.ajaxMegaBox({url:"/getSystemDate",success:function(t,e,n){a.fn_initRun(t.sysDate.toDay+" "+t.sysDate.toTime),a.fn_workingRun()}})},Timers.timeStemp=function(t){var e=new Timers,n={},a=0;n.timeStemp=e.fn_DiffFmt(0),n.runKey=setInterval(function(){n.timeStemp=e.fn_DiffFmt(a+=1e3),t(n)},1e3)},Timers.call=function(t,e,n,a){var o=new Timers,i={};i.time=o.compTime[e]*t,n&&n(i),i.runKey=setTimeout(function(){a&&a(i)},1e3*i.time)},Timers.clearTimer=function(t){return clearTimeout(t),this},Timers.allClearTimer=function(){return Timers.runKeyList.forEach(function(t,e){clearTimeout(t)}),this},$(function(){$(window).on("load",function(){}),$("#layer_age_alert .btn-modal-close").on("click",function(){}),$("#footer .btn-looking-theater").on("click",function(t){t.preventDefault();var a=$("#layer_looking_theater");$.ajaxMegaBox({dataType:"html",contentType:"application/json;charset=UTF-8",url:"/on/oh/ohc/Brch/selectFooterBrchListWithArea.do",commAt:!0,success:function(t,e,n){a.html(t)}})}),$("#header .link-area .header-open-layer.btn-layer-search").on("click",function(t){$("#layer_header_search").empty(),$.ajaxMegaBox({url:"/on/oh/ohz/Header",dataType:"html",commAt:!0,success:function(t){$("#layer_header_search").append(t),$("#layer_header_search").addClass("appendHtml")}})}),$("#header .link-area .header-open-layer.btn-layer-mymega").on("click",function(t){$("#layer_mymega").hasClass("on")||e()});var e=function(){$.ajaxMegaBox({contentType:"application/json;charset=UTF-8",url:"/on/oh/ohg/MbLogin/selectLoginSession.do",data:{},success:function(t,e,n){switch(t.resultMap.result){case"Y":$("#layer_mymega .wrap .login-after").show(),$("#layer_mymega .wrap .login-before").hide(),a();break;default:$("#layer_mymega .wrap .login-after").hide(),$("#layer_mymega .wrap .login-before").show(),$("#layer_mymega .wrap").show()}}})},a=function(){$.ajaxMegaBox({contentType:"application/json;charset=UTF-8",url:"/on/oh/ohh/MyScnBoard/selectMyScnBoardInfo.do",async:!0,data:JSON.stringify({sellStatCd:"P"}),success:function(t,e,n){o(t),i(t),r(t),s(t),l(t),c(t),$("#layer_mymega .wrap").show()},complete:function(t,e,n){-1<e.indexOf("error")&&($("#layer_mymega .wrap .login-after").hide(),$("#layer_mymega .wrap .login-before").show(),$("#layer_mymega .wrap").show())}})},o=function(t){switch(t.vipAt){case"Y":$("#layer_mymega .vip").text(t.custInfo.mbClassNm);break;default:$("#layer_mymega .vip").text("")}$("#layer_mymega .name").text(t.custInfo.mbNm),$("#layer_mymega .last-date em").text(t.custInfo.lastLoginDt)},i=function(t){var n="";if("Y"==t.vipAt)switch(t.custInfo.mbClassCd){case"RVIP":n+='<i class="iconset ico-header-vipp"></i>';break;case"VVIP":n+='<i class="iconset ico-header-vvip"></i>';break;default:n+='<i class="iconset ico-header-vip"></i>'}0<t.mbshipJoinInfo.length&&$.each(t.mbshipJoinInfo,function(t,e){"SMT01"==e.svcTyCd&&(n+='<i class="iconset ico-header-film"></i>'),"SMT02"==e.svcTyCd&&(n+='<i class="iconset ico-header-classic"></i>')}),$("#layer_mymega .membership").html(n)},r=function(t){t.cponInfo.cponCnt+=t.cponInfo.othcomCponCnt,$("#layer_mymega .point .count").text(t.pointInfo.totHoldPoint.format()),$("#layer_mymega .coupon .count .cpon").text(t.cponInfo.cponCnt),$("#layer_mymega .coupon .count .movie").text(t.cponInfo.movieMvtchkHoldCnt)},s=function(t){switch(t.bokdList.length){case 0:$("#layer_mymega .reserve .txt").text("예매내역이 없어요!");break;default:$("#layer_mymega .reserve .txt").text(gfn_charToHtml(t.bokdList[0].movieNm))}},l=function(t){$("#layer_mymega .buy .count em").text(t.pureInfo.length)},c=function(t){0<t.cponPassList.length&&$("#layer_mymega .couponpass").show()},m={recordCountPerPage:5,currentPage:1,totalPage:0,readAt:"N"};$(document).on("click",".after .notice",function(){0==$(".right-link .after .layer-header-notice").is(".on")&&n("")}),$(document).on("click",".notice-list-more button",function(){n("PAGE")});var t=location.pathname;-1!=["/main","/store","/booking","/event","/myMegabox"].indexOf(t)&&(m.readAt="N",$.ajax({contentType:"application/json;charset=UTF-8",url:"/on/oh/ohz/MySetting/selectMbPushHistCnt.do",type:"POST",data:JSON.stringify(m),success:function(t,e,n){null==t.totalCnt&&$(".right-link .after .notice").hide(),0<t.totalCnt&&$(".right-link .after .notice").addClass("on")}}));var n=function(t){if("PAGE"==t){if(!(m.currentPage<m.totalPage))return void gfn_alertMsgBox("알림함 내역이 없습니다.");m.currentPage++}m.readAt="",$.ajaxMegaBox({contentType:"application/json;charset=UTF-8",url:"/on/oh/ohz/MySetting/selectMbPushHist.do",data:JSON.stringify(m),success:function(t,e,n){var a=$(".layer-header-notice .notice-wrap");if(null!=t.mbNoticeList&&0<t.mbNoticeList.length){m.totalPage=t.pageCnt,1==m.currentPage&&a.find(".list").html("");var o="";for(var i in t.mbNoticeList){var r=t.mbNoticeList[i];r.notiLinkUrl=r.notiLinkUrl.replace("/movie/online-review?","/movie-detail?"),"mobile-order"==r.notiLinkUrl.split("/")[1]&&(r.notiLinkUrl="javascript:alert('모바일앱 전용 링크입니다.')"),o='<li>\t<p class="tit">'+r.notiTitle+'</p>\t<div class="cont"><a href="'+r.notiLinkUrl+'" title="'+r.notiTitle+'">'+r.notiCn+'</a>\t</div>\t<p class="time">'+r.fstRegDt+"</p></li>",a.find(".list").append(o)}a.find(".totalCnt").text(t.totalCnt),$(".notice-list-more").show()}else o='<li class="no-list">\t알림 내역이 없습니다.</li>',a.find(".list").html(o),a.find(".totalCnt").text(0),$(".notice-list-more").hide()}})};$(document).on("click","div.go-mobile a",function(){var a="";(-1<location.pathname.indexOf("/event")||-1<location.pathname.indexOf("/store")||-1<location.pathname.indexOf("/movie"))&&(a=location.pathname),$.ajaxMegaBox({url:"/getToken",async:!0,success:function(t,e,n){},error:function(t,e,n){},complete:function(t,e,n){gfn_setCookie("FROM_MOBILE_WEB","N",30,location.host.substr(location.host.indexOf("."))),location.href=$("div.go-mobile a").data("url")+"/sessionCpResponse?returnPath="+a+location.search+"&token="+encodeURIComponent(t.responseJSON.token)}})}),$(".container").on("click",".eventBtn",function(t){t.preventDefault();var e=MegaboxUtil.Form.createForm();"Y"==$(this).data("netfunnel")?(e.attr("action","/event/detail?eventNo="+$(this).data("no")),NetfunnelChk.formSubmit("EVENT_DTL",e,function(){})):(e.append('<input type="hidden" name="eventNo" value="'+$(this).data("no")+'">'),e.attr("action","/event/detail"),e.attr("method","get"),e.submit())}),$(document).on("focus","input:password",function(t){$("input:password").passTrim()}),$(document).on("focus",".strTrim",function(t){$(".strTrim").passTrim()})});